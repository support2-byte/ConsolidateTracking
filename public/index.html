<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal Gulf Shipping - Track Your Shipment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css ">
    <style>
        :root {
            --rg-orange: #f97316;
            --rg-green: #16a34a;
            --rg-dark: #0f172a;
            --rg-muted: #f8fafc;
            --rg-subtext: #64748b;
            --radius: 18px;
            --shadow: 0 8px 25px rgba(0, 0, 0, .06);
            --gradient: linear-gradient(135deg, var(--rg-orange), var(--rg-green));
            font-family: "Poppins", Sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
        }

        /* Mobile Toggle Menu Styles */
        .mobile-menu-toggle {
            display: none;
        }

        .mobile-menu-toggle+label {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 5px;
            position: relative;
        }

        .mobile-menu-toggle+label span {
            width: 25px;
            height: 3px;
            background: #ff6600;
            margin: 3px 0;
            transition: all 0.3s ease;
            border-radius: 3px;
            transform-origin: center;
        }

        /* Hamburger to Close Animation */
        #mobile-menu-toggle:checked~label span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        #mobile-menu-toggle:checked~label span:nth-child(2) {
            opacity: 0;
            transform: scale(0);
        }

        #mobile-menu-toggle:checked~label span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 1001;
            display: block;
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle+label {
                display: flex;
            }
        }

        .mobile-menu-toggle+label {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 0px;
        }

        .mobile-menu-toggle+label span {
            width: 25px;
            height: 2px;
            background: #ff6600;
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 3px;
        }

        .mobile-nav.active {
            left: 0;
        }

        .mobile-nav ul {
            list-style: none;
            padding: 0;
        }

        .mobile-nav li {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mobile-nav a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 15px 20px;
            font-size: 16px;
            transition: background 0.3s;
        }

        .mobile-nav a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .mobile-nav .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            color: white;
            font-size: 53px;
            cursor: pointer;
        }

        .mobile-logo img {
            width: 230px;
            height: auto;
            margin: -40px 0 20px 10px;
        }

        .logo img {
            width: 200px;
            height: auto;
            margin: 10px 0 0 0;
        }

        /* Top Bar */
        .top-bar {
            background: var(--gradient);
            color: white;
            padding: 5px 0;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .top-bar-left {
            display: flex;
            align-items: center;
            gap: 50px;
            justify-content: space-around;
            margin-left: 0px;
            flex: auto;
        }

        .top-bar-left a {
            color: white;
            text-decoration: none;
        }

        .top-bar-left a:hover {
            text-decoration: underline;
        }

        .top-bar-right {
            display: flex;
            align-items: left;
            gap: 10px;
            margin-right: 20px;
        }

        .social-icons a {
            color: white;
            font-size: 16px;
            margin-left: 5px;
        }

        .social-icons a:hover {
            color: #ffd700;
        }

        .main-header {
            background-color: #fff;
            padding: 10px 90px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 9;
        }

        .logo {
            margin-left: 0px;
            font-size: 24px;
            font-weight: bold;
            color: #008080;
        }

        .logo i {
            color: #ff6600;
            margin-right: 5px;
        }

        .main-nav {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 0 20px;
            width: 100%;
            justify-content: flex-end;
        }

        .main-nav a {
            color: #000;
            text-decoration: none;
            font-weight: bold;
            text-transform: capitalize;
            font-size: 15px;
            padding: 0 10px 0 0px;
        }

        .main-nav a:hover {
            color: #ff6600;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 20px;
        }

        .cart {
            position: relative;
            color: #ff6600;
            font-weight: bold;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ff6600;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .search-icon,
        .user-icon {
            color: #008080;
            font-size: 18px;
            cursor: pointer;
        }

        /* Sub Menu */
        .sub-menu {
            background: var(--gradient);
            color: #fff;
            padding: 20px 24px 16px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        .sub-menu a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            position: relative;
        }

        .sub-menu a:hover {
            color: #ffd700;
        }

        /* Page Title Area */
        .page-title-area {
            min-height: 465px;
            position: relative;
            background-size: cover;
            background-position: center;
            background-color: rgba(0, 0, 0, 0.9);
        }

        .page-title-area:before {
            position: absolute;
            content: "";
            left: 0;
            width: 72.5%;
            height: 100%;
            background: #1a1a2b;
            z-index: -1;
        }

        @media (max-width: 575px) {
            .page-title-area {
                min-height: 465px;
                position: relative;
                background-size: cover;
                background-position: center;
                background-color: rgba(0, 0, 0, 0.9);
                top: 0;
            }

            .page-title-area:before {
                width: 100%;
                background-color: rgba(0, 0, 0, 0.9);
            }
        }

        .page-title-area::after {
            position: absolute;
            content: "";
            top: 0;
            right: 0;
            width: 27.5%;
            height: 100%;
            background: #ff5e14;
            z-index: -1;
        }

        @media (max-width: 575px) {
            .page-title-area::after {
                width: 0;
            }
        }

        .page-title-content {
            position: relative;
            z-index: 55;
            padding: 210px 0 0 0;
            text-align: center;
        }

        @media (max-width: 575px),
        only screen and (min-width: 1200px) and (max-width: 1400px) {
            .page-title-content {
                padding-right: 0;
            }
        }

        .page-title-content p {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-family: "Roboto", sans-serif;
            line-height: 55px;
            margin-bottom: 0;
        }

        @media (max-width: 575px) {
            .page-title-content p {
                font-size: 16px;
            }
        }

        .page-title-content h1 {
            color: #ffffff;
            margin-bottom: 33px;
            text-transform: capitalize;
            text-align: center;
            margin: 0 0 0 0;
        }

        @media (max-width: 575px) {
            .page-title-content h1 {
                font-size: 34px;
                letter-spacing: -1px;
            }
        }

        .breadcrumb-menu {
            position: absolute;
            bottom: 0;
            right: 22.9%;
        }

        .breadcrumb {
            margin-bottom: 0;
            height: 50px;
            line-height: 50px;
            padding: 0 35px;
            background: white;
        }

        .trail-item.trail-end {
            color: #ff5e14;
        }

        .trail-item+.trail-item::before {
            color: #777777;
            content: "|";
            padding-right: 8px;
        }

        .container1 {
            min-width: auto;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .header1 {
            background: var(--gradient);
            color: #fff;
            padding: 20px 24px 16px;
            box-shadow: var(--shadow);
        }

        .brand {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 14px
        }

        .brand img {
            height: 46px;
            background: #fff;
            border-radius: 10px;
            padding: 6px
        }

        .brand-title h1 {
            margin: 0;
            font-size: 18px;
            font-weight: 800;
            letter-spacing: .3px
        }

        .tagline {
            opacity: .9;
            font-size: 12px;
            letter-spacing: .8px
        }

        .summary {
            background: #fff;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 24px;
            margin-bottom: 22px;
            position: relative;
            text-align: center
        }

        .summary h2 {
            color: #008080;
            margin-bottom: 33px;
            font-size: 30px;
            text-transform: capitalize;
        }

        #steps-h {
            flex-direction: row
        }

        .search-box {
            margin-top: 14px;
            text-align: center;
        }

        .timeline-h .steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
            width: 100%;
            flex-direction: row;
        }

        .search-box input[type="text"] {
            padding: 18px 16px;
            border-radius: 10px;
            border: 1px solid #cbd5e1;
            width: 100%;
            max-width: 300px;
            font-size: 14px;
        }

        .search-btn {
            background: var(--gradient);
            color: #fff;
            border: 0;
            padding: 18px 38px;
            border-radius: 10px;
            font-weight: 700;
            text-decoration: none;
            cursor: pointer;
            margin-top: 10px;
            max-width: 300px;
            display: inline-block;
        }

        .route {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 6px;
            color: var(--rg-dark);
            font-weight: 600
        }

        .route span {
            font-size: 16px
        }

        .route .arrow {
            font-size: 20px;
            color: var(--rg-orange)
        }

        .last-updated {
            position: absolute;
            top: 24px;
            right: 24px;
            font-size: 12px;
            color: var(--rg-subtext);
            font-weight: 500;
        }

        .order-info {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 18px;
            margin-top: 18px
        }

        .info-block {
            background: #f9fafb;
            border-radius: 12px;
            padding: 12px 18px;
            min-width: 140px;
            text-align: center;
            border: 1px solid #eef2f7;
            flex: 1;
            max-width: 185px
        }

        .info-label {
            font-size: 11px;
            color: var(--rg-subtext);
            text-transform: uppercase;
            letter-spacing: .5px
        }

        .info-value {
            font-weight: 800;
            margin-top: 6px;
            font-size: 14px
        }

        .timeline-h {
            position: relative;
            margin: 28px 0 6px;
            display: none;
        }

        .timeline-h .line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 6px;
            background: #e5e7eb;
            border-radius: 999px;
            transform: translateY(-50%)
        }

        .timeline-h .progress {
            position: absolute;
            top: 50%;
            left: 0;
            height: 6px;
            background: var(--gradient);
            border-radius: 999px;
            transform: translateY(-50%);
            width: 0;
            transition: width .8s ease
        }

        .steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
            width: 100%;
            flex-direction: row;
        }

        .timeline-h .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100%;
            transition: color .3s ease;
            padding: 0 5px;
            position: relative
        }

        .timeline-h .step:hover label {
            color: var(--rg-orange)
        }

        .timeline-h .node {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #e5e7eb;
            border: 3px solid #fff;
            box-shadow: 0 0 0 2px #e5e7eb;
            transition: all .3s ease;
            z-index: 2
        }

        .timeline-h .step.done .node {
            background: var(--rg-green);
            box-shadow: 0 0 0 2px var(--rg-green)
        }

        .timeline-h .step.active .node {
            background: var(--rg-orange);
            box-shadow: 0 0 0 3px var(--rg-orange);
            animation: pulse 1.6s ease-in-out infinite
        }

        .timeline-h label {
            margin-top: 20px;
            font-size: 12px;
            color: var(--rg-subtext);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%
        }

        .status-message {
            text-align: center;
            font-size: 15px;
            color: var(--rg-subtext);
            margin-top: 12px;
            font-weight: 500
        }

        .note-box {
            display: none;
            margin: 18px auto 0;
            background: #ecfdf5;
            border: 2px solid var(--rg-orange);
            border-radius: 12px;
            padding: 14px 16px;
            max-width: 800px;
            text-align: left;
            font-size: 14px;
            box-shadow: var(--shadow)
        }

        .note-box.visible {
            display: block
        }

        .note-box strong {
            color: var(--rg-dark)
        }

        .note-box span {
            color: var(--rg-orange);
            margin-right: 4px
        }

        .panel {
            background: #fff;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 24px 24px 24px 50px;
            position: relative;
            overflow: hidden;
            margin-top: 20px
        }

        .track-line {
            position: absolute;
            left: 32px;
            top: 30px;
            width: 4px;
            background: var(--rg-green);
            border-radius: 999px
        }

        .track-line.dotted {
            background: repeating-linear-gradient(to bottom, var(--rg-green) 0 10px, transparent 10px 18px);
            opacity: .5;
            height: 50px !important
        }

        .item {
            display: flex;
            gap: 20px;
            position: relative;
            margin-bottom: 26px;
            align-items: flex-start
        }

        .dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e5e7eb;
            border: 2px solid #fff;
            box-shadow: 0 0 0 2px #e5e7eb;
            flex-shrink: 0;
            z-index: 2;
            margin-top: 2px;
            position: relative
        }

        .item.done .dot {
            background: var(--rg-green);
            box-shadow: 0 0 0 2px var(--rg-green)
        }

        .item.active .dot {
            background: var(--rg-orange);
            box-shadow: 0 0 0 2px var(--rg-orange);
            animation: pulse 1.6s ease-in-out infinite
        }

        .content {
            padding-top: 2px;
            flex: 1;
            font-family: 'Inter', Arial, sans-serif
        }

        .status {
            font-weight: 800;
            font-size: 15px;
            margin: 0;
            line-height: normal
        }

        .time {
            font-size: 12px;
            color: var(--rg-subtext);
            line-height: normal;
            margin: 0
        }

        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 16px
        }

        .btn {
            appearance: none;
            border: 0;
            background: #ff6600;
            color: #fff;
            padding: 12px 16px;
            border-radius: 12px;
            font-weight: 800;
            cursor: pointer;
            border: 1px solid #e2e8f0;
            width: 100%;
            max-width: 254px;
            font-size: 20px;
        }

        .eta {
            display: inline-block;
            padding: 10px 16px;
            border-radius: 999px;
            background: var(--gradient);
            color: #fff;
            font-weight: 800;
            font-size: 14px
        }

        /* Status Logs in Timeline Panel */
        .logs-header {
            margin-top: 40px;
            padding: 20px 0 0;
            border-top: 1px solid #e5e7eb
        }

        .logs-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--rg-dark);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px
        }

        .logs-body {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px
        }

        .log-item {
            padding: 16px 0;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            flex-direction: column;
            gap: 4px
        }

        .log-item:last-child {
            border-bottom: none
        }

        .log-change {
            font-weight: 600;
            color: var(--rg-dark);
            font-size: 14px
        }

        .log-details {
            font-size: 12px;
            color: var(--rg-subtext);
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 8px
        }

        .log-user {
            font-weight: 500
        }

        .log-sheet {
            background: #eff6ff;
            color: #2563eb;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px
        }

        .no-logs {
            text-align: center;
            padding: 40px;
            color: var(--rg-subtext);
            font-style: italic
        }

        /* Modal Styles */
        .rgs-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease
        }

        .rgs-modal-overlay.active {
            opacity: 1;
            visibility: visible
        }

        .rgs-modal {
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            padding: 30px;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
            position: relative;
            z-index: 1000000
        }

        .rgs-modal-overlay.active .rgs-modal {
            transform: translateY(0)
        }

        .rgs-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px
        }

        .rgs-modal-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--rg-dark)
        }

        .rgs-close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--rg-subtext);
            transition: color 0.2s;
            line-height: 1
        }

        .rgs-close-btn:hover {
            color: var(--rg-orange)
        }

        .rgs-form-group {
            margin-bottom: 20px
        }

        .rgs-form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--rg-dark)
        }

        .rgs-form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #cbd5e1;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s
        }

        .rgs-form-control:focus {
            outline: none;
            border-color: var(--rg-orange)
        }

        .rgs-modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px
        }

        .rgs-btn-secondary {
            background: #f1f5f9;
            color: var(--rg-dark);
            border: 1px solid #e2e8f0
        }

        .rgs-btn-primary {
            background: var(--rg-orange);
            color: white;
            border: none
        }

        .rgs-btn-secondary,
        .rgs-btn-primary {
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s
        }

        .rgs-btn-secondary:hover {
            background: #e2e8f0
        }

        .rgs-btn-primary:hover {
            background: #ea580c
        }

        .rgs-loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, .3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: rgs-spin 1s ease-in-out infinite;
            margin-right: 10px
        }

        @keyframes rgs-spin {
            to {
                transform: rotate(360deg)
            }
        }

        .ship {
            position: absolute;
            top: calc(0% - 0px);
            width: 40px;
            height: 40px;
            fill: var(--rg-dark);
            transition: left 0.8s ease;
            z-index: 3;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(249, 115, 22, .5)
            }

            70% {
                box-shadow: 0 0 0 10px rgba(249, 115, 22, 0)
            }

            100% {
                box-shadow: 0 0 0 0 rgba(249, 115, 22, 0)
            }
        }

        /* Footer Styles */
        .footer {
            padding: 30px 100px;
            background-color: #11111f;
            color: white;
        }

        .footer-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 40px 10px;
        }

        .footer-section {
            flex: 1;
            max-width: 250px;
        }

        .logo-section .logo {
            font-size: 24px;
            font-weight: bold;
            color: #008080;
            margin-bottom: 15px;
        }

        .logo-section .logo i {
            color: #ff6600;
            margin-right: 8px;
        }

        .logo-section p {
            font-size: 14px;
            margin-bottom: 20px;
            opacity: 0.8;
            line-height: 1.5;
        }

        .social-icons {
            display: flex;
            gap: 10px;
        }

        .social-icons a {
            color: white;
            font-size: 18px;
            transition: color 0.3s;
        }

        .social-icons a:hover {
            color: #ff6600;
        }

        .footer-section h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: white;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 8px;
        }

        .footer-section ul li a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
        }

        .footer-section ul li a:hover {
            color: #ff6600;
        }

        .subscribe-section p {
            font-size: 14px;
            margin-bottom: 15px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .subscribe-form {
            display: flex;
            background-color: white;
            border-radius: 25px;
        }

        .subscribe-form input {
            flex: 1;
            border: none;
            padding: 12px 20px;
            font-size: 14px;
            outline: none;
        }

        .subscribe-form button {
            background-color: #008080;
            color: white;
            border: none;
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }

        .subscribe-form button:hover {
            background-color: #006666;
        }

        .subscribe-form button i {
            font-size: 14px;
        }

        .footer-bottom {
            background-color: #ff6600;
            text-align: center;
            padding: 15px;
        }

        .footer-bottom p {
            color: white;
            font-size: 14px;
        }

        .footer-bottom a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
        }

        .footer-bottom a:hover {
            text-decoration: underline;
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .footer-top {
                flex-wrap: wrap;
                padding: 30px 20px;
            }

            .footer-section {
                max-width: 100%;
                text-align: center;
                margin-bottom: 30px;
            }

            .subscribe-form {
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .footer-top {
                flex-direction: column;
                gap: 20px;
                padding: 20px 0;
                display: none !important;
            }

            .top-bar {
                flex-direction: column;
                gap: 10px;
                text-align: center;
                padding: 10px;
            }

            .top-bar-left,
            .top-bar-right {
                margin: 0;
                justify-content: center;
                gap: 20px;
            }

            .main-header {
                padding: 10px 20px;
                position: relative;
            }

            .logo {
                margin-left: 0;
            }

            .main-nav {
                display: none;
            }

            .mobile-menu-toggle+label {
                display: flex;
            }

            nav.sub-menu-2 {
                display: none;
            }

            .sub-menu {
                display: none;
            }

            .page-title-content {
                padding: 200px 0 0 0;
            }

            .page-title-content h1 {
                font-size: 28px;
                padding: 0;
            }

            .container1 {
                padding: 20px 15px;
            }

            .summary {
                padding: 20px 15px;
            }

            .summary h2 {
                font-size: 24px;
            }

            .search-box input[type="text"] {
                max-width: 100%;
            }

            .search-btn {
                max-width: 100%;
                padding: 15px 30px;
            }

            .route {
                flex-direction: column;
                gap: 5px;
            }

            .route .arrow {
                transform: rotate(90deg);
            }

            .order-info {
                gap: 10px;
                justify-content: center;
            }

            .info-block {
                min-width: 120px;
                padding: 10px 12px;
                max-width: 100%;
            }

            .timeline-h {
                display: none;
            }

            .status-message {
                font-size: 14px;
            }

            .panel {
                padding: 20px 15px 20px 40px;
            }

            .track-line {
                left: 22px;
                display: none;
            }

            .item {
                margin-bottom: 20px;
                gap: 15px;
                flex-direction: column;
                align-items: center;
            }

            .status {
                font-size: 14px;
            }

            .time {
                font-size: 11px;
            }

            .rgs-modal {
                padding: 20px;
                margin: 20px;
            }

            .rgs-modal-title {
                font-size: 20px;
            }

            .rgs-modal-actions {
                flex-direction: column;
            }

            .logs-body {
                max-height: 300px;
            }

            .footer-top {
                flex-direction: column;
                gap: 20px;
                padding: 20px 0;
            }

            .social-icons {
                justify-content: center;
            }

            .subscribe-form {
                flex-direction: column;
            }

            .subscribe-form input {
                width: 100%;
                margin-bottom: 10px;
            }

            .footer-bottom {
                background-color: #ff6600;
                text-align: left;
                padding: 15px;
            }

            .brand {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            #steps-h {
                flex-direction: column;
            }

            .ship {
                top: calc(96.5% - 0px);
                display: none;
            }

            .last-updated {
                position: initial;
                margin: 20px 0 10px 0;
                text-align: center;
            }

            .log-item {
                padding: 12px 0;
            }

            .logs-title {
                font-size: 16px;
            }
        }

        @media (max-width: 576px) {
            .footer {
                display: none;
            }

            #steps-h {
                flex-direction: row;
                flex-wrap: wrap;
                margin: 20px 0 20px 0;
            }

            .timeline-h .steps {
                display: flex;
                justify-content: center;
                align-items: center;
                position: relative;
                z-index: 1;
                width: 100%;
                flex-direction: row;
            }

            .timeline-h .step {
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                width: 45%;
                transition: color .3s ease;
                padding: 20px 5px;
                position: relative;
            }

            .timeline-h .progress {
                position: relative;
                left: 0;
                height: 25px;
                background: var(--gradient);
                border-radius: 999px;
                transform: translateY(-50%);
                width: 0;
                transition: width .8s ease;
                margin: 0px 0 20px 0;
                top: -27px;
            }

            .timeline-h .line {
                position: relative;
                top: 0;
                left: 0;
                right: 0;
                height: 25px;
                background: #e5e7eb;
                border-radius: 999px;
                transform: translateY(-50%);
            }

            .timeline-h {
                position: relative;
                margin: 58px 0 36px 0;
                display: none;
            }

            .brand img {
                height: 40px;
            }

            .brand-title h1 {
                font-size: 14px;
            }

            .tagline {
                font-size: 10px;
            }

            .summary h2 {
                font-size: 18px;
            }

            .order-info {
                flex-direction: column;
                align-items: center;
            }

            .info-block {
                min-width: 100%;
                max-width: 100%;
            }

            .status-message {
                font-size: 13px;
            }

            .panel {
                padding: 20px 15px 20px 35px;
            }

            .track-line {
                left: 20px;
            }

            .logs-header {
                padding: 16px 0 0;
            }

            .logs-title {
                font-size: 16px;
            }

            .top-bar-left {
                gap: 10px;
                flex-direction: column;
            }
        }

        /* Loader */
        #loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: #f8fafc;
        }

        .mobile-nav {
            position: fixed;
            top: 0;
            left: -100%;
            width: 80%;
            height: 100vh;
            background: #10101b;
            z-index: 1000;
            transition: left 0.3s ease;
            padding-top: 70px;
        }

        #content {
            display: none;
        }

        /* Error message style */
        .error-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
    </style>
</head>

<body>
    <div id="loader">
        <h2>Verifying...</h2>
        <p>Please wait while we verify you are human.</p>
    </div>

    <main id="content">
        <div class="top-bar">
            <div class="top-bar-left">
                <a href="tel:+97148888888"><i class="fas fa-phone-alt"></i> +971 4 333 1785</a>
                <a href="mailto:info@royalgulfshipping.com"><i class="fas fa-envelope"></i>
                    info@royalgulfshipping.com</a>
                <a href="#address"><i class="fas fa-map-marker-alt"></i> Ras Al Khor Industrial Area, Dubai</a>
            </div>
        </div>

        <header class="main-header">
            <div class="logo">
                <img src="logo.jpeg" alt="Royal Gulf Shipping Logo" />
            </div>
            <nav class="main-nav">
                <div>
                    <a href="https://royalgulfshipping.com ">Home</a>
                    <a href="https://royalgulfshipping.com/about-us/ ">About</a>
                    <a href="https://royalgulfshipping.com/contact ">Contact Us</a>
                </div>
            </nav>
            <input type="checkbox" id="mobile-menu-toggle" class="mobile-menu-toggle">
            <label for="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </label>
        </header>

        <!-- Mobile Toggle Menu -->
        <nav class="mobile-nav" id="mobileNav">
            <div class="mobile-logo">
                <img src="https://royalgulfshipping.com/wp-content/uploads/2023/08/RGSL-LOGO-white.png "
                    alt="Royal Gulf Shipping Logo" />
            </div>
            <span class="close-btn"
                onclick="document.getElementById('mobile-menu-toggle').checked = false;">&times;</span>
            <ul>
                <li><a href="https://royalgulfshipping.com ">Home</a></li>
                <li><a href="https://royalgulfshipping.com/about-us/ ">About</a></li>
                <li><a href="https://royalgulfshipping.com/contact ">Contact Us</a></li>
                <li><a href="https://royalgulfshipping.com/containers-for-sale/ ">Container For Sale</a></li>
                <li><a href="https://royalgulfshipping.com/warehouse-storage/ ">Warehouse Storage Services</a></li>
                <li><a href="https://royalgulfshipping.com/container-storage/ ">Container Storage Services</a></li>
                <li><a href="https://royalgulfshipping.com/cold-storage/ ">Cold Storage Warehouse Solutions</a></li>
                <li><a href="https://royalgulfshipping.com/self-storage-in-dubai/ ">Self-Access Storage</a></li>
            </ul>
        </nav>

        <!-- Sub Menu (Desktop Only) -->
        <nav class="sub-menu-2">
            <ul class="sub-menu" style="list-style: none; display: flex; justify-content: center; gap: 30px;">
                <li class="nav-items"><a href="https://royalgulfshipping.com/containers-for-sale/ ">Container For
                        Sale</a></li>
                <li class="nav-items"><a href="https://royalgulfshipping.com/warehouse-storage/ ">Warehouse Storage
                        Services</a></li>
                <li class="nav-items"><a href="https://royalgulfshipping.com/container-storage/ ">Container Storage
                        Services</a></li>
                <li class="nav-items"><a href="https://royalgulfshipping.com/cold-storage/ ">Cold Storage Warehouse
                        Solutions</a></li>
                <li class="nav-items"><a href="https://royalgulfshipping.com/self-storage-in-dubai/ ">Self-Access
                        Storage</a></li>
            </ul>
        </nav>

        <div class="page-title-area" style="background-image: url('banner.png');">
            <div class="container">
                <div class="page-title-content">
                    <a id="searchBtn" href="https://royalgulfshipping.com/get-freight-quote/ " class="search-btn">Get a
                        Quote</a>
                </div>
            </div>
        </div>

        <main class="container1">
            <section class="summary">
                <h2>Track Your Shipment</h2>
                <div class="search-box" id="searchBox">
                    <input id="refInput" type="text" placeholder="Enter Reference ID (e.g., RGSL-ORD-JQQZRMK7)" />
                    <button id="searchBtn" class="search-btn" onclick="trackShipment()">Track</button>
                   </div>

                <div class="error-message" id="errorMessage"></div>

                <div class="route" id="route" style="display:none;">
                    <span id="pol"></span>
                    <span class="arrow">➜</span>
                    <span id="pod"></span>
                </div>

                <div class="last-updated" id="lastUpdated" style="display:none;">Last updated on: —</div>

                <div class="order-info" id="orderInfo" style="display:none;">
                    <div class="info-block">
                        <div class="info-label">REF ID</div>
                        <div class="info-value" id="refId">—</div>
                    </div>
                    <div class="info-block">
                        <div class="info-label">Order ID</div>
                        <div class="info-value" id="orderId">—</div>
                    </div>
                    <div class="info-block">
                        <div class="info-label">Quantity</div>
                        <div class="info-value" id="qty">—</div>
                    </div>
                    <div class="info-block">
                        <div class="info-label">Weight</div>
                        <div class="info-value" id="wgt">—</div>
                    </div>
                    <div class="info-block">
                        <div class="info-label" id="etaLabel">Eta</div>
                        <div class="info-value" id="etaTop">—</div>
                    </div>
                </div>

                <div class="timeline-h" id="timelineContainer" style="display:none;">
                    <div class="line"></div>
                    <div class="progress" id="progress"></div>
                    <svg class="ship" id="ship" viewBox="0 0 64 64">
                        <path d="M4 40h12l4-6h24l4 6h12v4H4v-4zm4 6h48l-4 10H12l-4-10z" />
                    </svg>
                    <div class="steps" id="steps-h"></div>
                </div>
                <div id="statusMsg" class="status-message"></div>
                <div id="reverseNote" class="reverse-note"
                    style="display:none; background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 10px; border-radius: 5px; margin: 10px 0; text-align: center;">
                </div>
                <div id="noteBox" class="note-box"></div>

                <div class="actions" id="actions" style="display:none;">
                    <button class="btn" onclick="rgsOpenNotifyModal()"
                        title="Get email/SMS alerts when status changes">Notify Me</button>
                </div>
            </section>

            <section class="panel" id="timelinePanel" style="display:none;"></section>
        </main>

        <!-- Notification Modal -->
        <div class="rgs-modal-overlay" id="rgsNotifyModal">
            <div class="rgs-modal">
                <div class="rgs-modal-header">
                    <h2 class="rgs-modal-title">Get Shipment Updates</h2>
                    <button class="rgs-close-btn" onclick="rgsCloseNotifyModal()">&times;</button>
                </div>
                <form id="rgsNotifyForm">
                    <div class="rgs-form-group">
                        <label class="rgs-form-label" for="rgsEmail">Email Address</label>
                        <input type="email" id="rgsEmail" class="rgs-form-control" placeholder="Enter your email"
                            required>
                    </div>
                    <div class="rgs-modal-actions">
                        <button type="button" class="rgs-btn-secondary" onclick="rgsCloseNotifyModal()">Cancel</button>
                        <button type="submit" class="rgs-btn-primary" id="rgsSubmitBtn">
                            <span id="rgsSubmitText">Subscribe to Updates</span>
                            <span id="rgsSubmitLoading" style="display:none;">
                                <div class="rgs-loading"></div>Submitting...
                            </span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-top">
                <div class="footer-section logo-section">
                    <div class="logo">
                        <img src="https://royalgulfshipping.com/wp-content/uploads/2023/08/RGSL-LOGO-white.png "
                            alt="Royal Gulf Shipping Logo" />
                    </div>
                    <p>RSGL is an iconic and trustworthy service provider of freight and shipping services via ocean,
                        air, rail, and truck freight.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-section useful-links">
                    <h3>Useful Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="https://royalgulfshipping.com/about-us ">About</a></li>
                        <li><a href="https://royalgulfshipping.com/blogs/ ">Blog</a></li>
                        <li><a href="https://royalgulfshipping.com/contact ">Contact Us</a></li>
                    </ul>
                </div>
                <div class="footer-section categories">
                    <h3>Categories</h3>
                    <ul>
                        <li><a href="https://royalgulfshipping.com/containers-for-sale/ ">Container For Sale</a></li>
                        <li><a href="https://royalgulfshipping.com/warehouse-storage/ ">Warehouse Storage Services</a>
                        </li>
                        <li><a href="https://royalgulfshipping.com/container-storage/ ">Container Storage Services</a>
                        </li>
                        <li><a href="https://royalgulfshipping.com/cold-storage/ ">Cold Storage Warehouse Solutions</a>
                        </li>
                        <li><a href="https://royalgulfshipping.com/self-storage-in-dubai/ ">Self-Access Storage</a></li>
                    </ul>
                </div>
                <div class="footer-section subscribe-section">
                    <h3>Subscribe Now</h3>
                    <p>Don't miss our future updates! Get Subscribed Today!</p>
                    <form class="subscribe-form">
                        <input type="email" placeholder="Your mail here">
                        <button type="submit"><i class="fas fa-envelope"></i>Submit</button>
                    </form>
                </div>
            </div>
        </footer>
        <div class="footer-bottom">
            <p><a href="https://royalgulfshipping.com/privacy-policy-2 ">Privacy & Policy</a> | <a
                    href="https://royalgulfshipping.com/terms-and-conditions/ ">Terms & Conditions</a></p>
        </div>
    </main>

    <script>
        const API_BASE_URL = 'https://consolidate.onrender.com/api/orders/track/item'; // Change this to your actual API URL
        let currentShipmentData = null;
        const statusSteps = [
            { key: 'created', label: 'Created', status: 'Created' },
            { key: 'ready', label: 'Ready for Loading', status: 'Ready for Loading' },
            { key: 'loaded', label: 'Loaded', status: 'Loaded' },
            { key: 'in_transit', label: 'In Transit', status: 'In Transit' },
            { key: 'arrived', label: 'Arrived', status: 'Arrived' },
            { key: 'delivered', label: 'Delivered', status: 'Delivered' }
        ];

        function showToast(message, type = 'info') {
            // Remove existing toasts
            const existingToasts = document.querySelectorAll('.toast');
            existingToasts.forEach(toast => toast.remove());

            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            toast.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? '#16a34a' : type === 'error' ? '#dc2626' : '#3b82f6'};
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10000;
            max-width: 350px;
            font-size: 14px;
            font-weight: 500;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            word-wrap: break-word;
        `;

            document.body.appendChild(toast);

            // Show toast
            requestAnimationFrame(() => {
                toast.style.transform = 'translateX(0)';
            });

            // Auto hide after 3 seconds
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
        }


        let rgsCurrentReferenceId = "";
        let rgsCurrentPol = "";
        let rgsCurrentPod = "";
        let rgsCurrentStatus = "";

        // Helper function to format date/time correctly (dd MMM yyyy, HH:mm) - assumes UTC+4 (GST)
        function rgsFmtTime(dateInput) {
            if (!dateInput) return '';
            const date = new Date(dateInput);
            if (isNaN(date.getTime())) return '';

            // Adjust for GST (UTC+4)
            date.setHours(date.getHours());

            const day = String(date.getDate()).padStart(2, '0');
            const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const month = monthNames[date.getMonth()];
            const year = date.getFullYear();
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');

            return `${day} ${month} ${year}, ${hours}:${minutes}`;
        }





        const rgsEl = (s, p = document) => p.querySelector(s);
        // Initialize
        window.addEventListener('load', function () {
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('content').style.display = 'block';
                const urlParams = new URLSearchParams(window.location.search);
                const refId = urlParams.get('ref');
                if (refId) {
                    document.getElementById('refInput').value = refId;
                    trackShipment();
                }
            }, 1000);
        });

        async function trackShipment() {
    const refInput = document.getElementById('refInput').value.trim();
    const errorDiv = document.getElementById('errorMessage');
    const btn = document.getElementById('searchBtn');
    const originalText = btn.textContent;

    // Early validation
    if (!refInput) {
        showError('Please enter a reference ID');
        return;
    }

    hideResults();
    errorDiv.style.display = 'none';

    // Loading state
    btn.textContent = 'Loading...';
    btn.disabled = true;

    try {
        const url = `https://consolidate.onrender.com/api/orders/track/item/${encodeURIComponent(refInput)}`;

        const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                // Remove unnecessary headers — server must handle CORS
                // If you need Authorization later: 'Authorization': `Bearer ${token}`
            },
            // mode: 'cors' is default — no need to set unless forcing 'no-cors' (which you don't want)
        });

        // Check if response was successful (200–299)
        if (!response.ok) {
            if (response.status === 404) {
                throw new Error('No shipment found with this reference ID');
            }
            if (response.status >= 500) {
                throw new Error('Server error — please try again later');
            }
            throw new Error(`Request failed: ${response.status} ${response.statusText}`);
        }

        const data = await response.json();

        // Optional small delay for UX (can remove if not needed)
        await new Promise(resolve => setTimeout(resolve, 800));

        if (data.success) {
            currentShipmentData = data.data;
            displayResults(data.data);
        } else {
            showError(data.message || 'No shipment found with this reference ID');
        }
    } catch (error) {
        console.error('Track shipment error:', error);
        // Differentiate network vs other errors
        const message = error.name === 'TypeError' && error.message.includes('fetch')
            ? 'Network error — check your internet or try again later'
            : error.message || 'Failed to fetch shipment data. Please try again.';
        showError(message);
    } finally {
        btn.textContent = originalText;
        btn.disabled = false;
    }
}
        const placeMap = {
            '5': 'KARACHI',
            '2': 'DUBAI',
        };

        // Display results
        function displayResults(data) {
            let totalWeight = 0;
            const eta = data.receivers[0]?.eta || data.eta;
            document.getElementById('pol').textContent = `POL: ${placeMap[data.place_of_loading] || '—'}`;
            document.getElementById('pod').textContent = `POD: ${placeMap[data.place_of_delivery] || '—'}`;
            document.getElementById('route').style.display = 'flex';
            document.getElementById('refId').textContent = data.booking_ref || '—';
            document.getElementById('orderId').textContent = data.order_id || '—';
            document.getElementById('qty').textContent = data.total_assigned_qty || '—';
            document.getElementById('etaTop').textContent = eta ? new Date(eta).toLocaleDateString() : '—';
            document.getElementById('orderInfo').style.display = 'flex';
            document.getElementById('lastUpdated').textContent = `Last updated: ${new Date().toLocaleString()}`;
            document.getElementById('lastUpdated').style.display = 'block';
            document.getElementById('actions').style.display = 'flex';
            buildTimeline(data);
            buildDetailsPanel(data);
            data.receivers.forEach(receiver => {
                receiver.items.forEach(item => {
                    totalWeight += item.weight || 0;
                });
            });
            document.getElementById('wgt').textContent = totalWeight > 0 ? `${totalWeight} kg` : '—';
        }

        // Build timeline visualization
        function buildTimeline(data) {
            let currentStatus = 'Created';
            let progressPercent = 0;
            let stepsHtml = '';
            const container = document.getElementById('steps-h');
            const timelineContainer = document.getElementById('timelineContainer');
            const progress = document.getElementById('progress');
            const statusMap = { 'Created': 0, 'Ready for Loading': 1, 'Loaded': 2, 'In Transit': 3, 'Arrived': 4, 'Delivered': 5 };
            const currentStepIndex = statusMap[currentStatus] || 0;
            const totalSteps = statusSteps.length;
            const stepProgress = ((currentStepIndex + 1) / totalSteps) * 100;
            if (data.receivers && data.receivers.length > 0) {
                const receiver = data.receivers[0];
                currentStatus = receiver.current_status || receiver.status || 'Created';
                let totalProgress = 0;
                let itemCount = 0;
                receiver.items.forEach(item => {
                    totalProgress += item.progress_percent || 0;
                    itemCount++;
                });
                progressPercent = itemCount > 0 ? totalProgress / itemCount : 0;
            }
            statusSteps.forEach((step, index) => {
                let stepClass = '';
                if (index < currentStepIndex) {
                    stepClass = 'done';
                } else if (index === currentStepIndex) {
                    stepClass = 'active';
                }
                stepsHtml += `<div class="step ${stepClass}" data-status="${step.key}"><div class="node"></div><label>${step.label}</label></div>`;
            });
            container.innerHTML = stepsHtml;

            // Set progress bar width
            setTimeout(() => {
                progress.style.width = `${stepProgress}%`;
                const ship = document.getElementById('ship');
                if (ship) {
                    ship.style.left = `${stepProgress}%`;
                    ship.style.transform = `translateX(-50%)`;
                }
            }, 100);
            timelineContainer.style.display = 'block';
            const statusMsg = document.getElementById('statusMsg');
            statusMsg.textContent = `Current Status: ${currentStatus} | Progress: ${Math.round(progressPercent)}%`;
        }

        // Build detailed panel
        function buildDetailsPanel(data) {
            const panel = document.getElementById('timelinePanel');
            let html = '<div class="track-line" style="height: 100%;"></div>';
            data.receivers.forEach((receiver, idx) => {
                const isLast = idx === data.receivers.length - 1;
                const itemClass = receiver.current_status === 'Delivered' ? 'done' : (isLast ? 'active' : 'done');
                if (receiver.status_history && receiver.status_history.length > 0) {
                    const sortedHistory = [...receiver.status_history].sort((a, b) =>
                        new Date(b.time) - new Date(a.time)
                    );
                    sortedHistory.forEach((historyItem, historyIdx) => {
                        const historyDate = new Date(historyItem.time).toLocaleString();
                        const isLatest = historyIdx === 0;
                        const historyClass = isLatest ? 'active' : 'done';
                        html += `<div class="item ${historyClass}">
                                    <div class="dot"></div>
                                    <div class="content">
                                        <div class="status">${historyItem.status}</div>
                                        <div class="time">${historyDate}</div>
                                    </div>
                                </div>`;
                    });
                }
            });
            panel.innerHTML = html;
            panel.style.display = 'block';
        }

        function simulateStatusUpdate(orderId) {
            document.getElementById('lastUpdated').textContent = `Last updated: ${new Date().toLocaleString()}`;
        }

        function hideResults() {
            document.getElementById('route').style.display = 'none';
            document.getElementById('orderInfo').style.display = 'none';
            document.getElementById('timelineContainer').style.display = 'none';
            document.getElementById('timelinePanel').style.display = 'none';
            document.getElementById('actions').style.display = 'none';
            document.getElementById('lastUpdated').style.display = 'none';
            document.getElementById('statusMsg').textContent = '';
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function rgsOpenNotifyModal() {
            document.getElementById('rgsNotifyModal').classList.add('active');
        }

        function rgsCloseNotifyModal() {
            document.getElementById('rgsNotifyModal').classList.remove('active');
        }

        document.getElementById('rgsNotifyModal').addEventListener('click', function (e) {
            if (e.target === this) {
                rgsCloseNotifyModal();
            }
        });

        // Attach events dynamically to avoid "not defined"
        document.addEventListener("DOMContentLoaded", () => {
            // URL param prefill
            const urlParams = new URLSearchParams(window.location.search);
            const refParam = urlParams.get("ref");
            if (refParam) {
                const input = rgsEl("#refInput");
                if (input) input.value = refParam.trim();
            }

            // Attach event listeners for modal
            const notifyModal = rgsEl('#rgsNotifyModal');
            if (notifyModal) {
                notifyModal.addEventListener('click', function (e) {
                    if (e.target === this) rgsCloseNotifyModal();
                });
            }

            const notifyForm = rgsEl('#rgsNotifyForm');
            if (notifyForm) {
                notifyForm.addEventListener('submit', async function (e) {
                    e.preventDefault();
                    const emailEl = rgsEl('#rgsEmail');
                    const email = emailEl ? emailEl.value.trim() : '';
                    if (!email || !email.includes('@')) {
                        showToast("Please enter a valid email address.", 'error');
                        return;
                    }

                    const submitText = rgsEl('#rgsSubmitText');
                    const submitLoading = rgsEl('#rgsSubmitLoading');
                    const submitBtn = rgsEl('#rgsSubmitBtn');
                    if (submitText) submitText.style.display = 'none';
                    if (submitLoading) submitLoading.style.display = 'inline';
                    if (submitBtn) submitBtn.disabled = true;
                    console.log('submit email', submitText)
                    try {
                        const response = await fetch("https://consolidate.onrender.com/api/orders/notify/me/", {  // Relative URL
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                action: 'saveNotification',
                                email: email,
                                referenceId: rgsCurrentReferenceId,
                                orderId: rgsEl('#orderId') ? rgsEl('#orderId').textContent.trim() : '',
                                route: `${rgsEl('#pol') ? rgsEl('#pol').textContent : ''} ➜ ${rgsEl('#pod') ? rgsEl('#pod').textContent : ''}`,
                                eta: rgsEl('#etaTop') ? rgsEl('#etaTop').textContent.trim() : '',
                                timestamp: new Date().toISOString()
                            })
                        });

                        const responseText = await response.text();
                        if (!response.ok) throw new Error(`HTTP ${response.status}: ${responseText}`);

                        const result = JSON.parse(responseText);
                        if (result.success) {
                            showToast('✅ Thank you! You will now receive updates on your shipment status.', 'success');
                            rgsCloseNotifyModal();
                            this.reset();
                        } else {
                            throw new Error(result.message || result.error || 'Unknown server error');
                        }
                    } catch (error) {
                        console.error('Full error details:', error);
                        showToast(`Error: ${error.message}. Check console for details.`, 'error');
                    } finally {
                        if (submitText) submitText.style.display = 'inline';
                        if (submitLoading) submitLoading.style.display = 'none';
                        if (submitBtn) submitBtn.disabled = false;
                    }
                });
            }

            // Year init
            const yearEl = rgsEl("#year");
            if (yearEl) yearEl.textContent = new Date().getFullYear();
        });

        document.getElementById('refInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                trackShipment();
            }
        });

        window.addEventListener('beforeunload', () => {
            if (window.currentUpdateInterval) {
                clearInterval(window.currentUpdateInterval);
            }
        });
    </script>
</body>

</html>
